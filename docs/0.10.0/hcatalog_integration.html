

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>HCatalog Integration &mdash; Apache Tajo 0.8.0 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="Apache Tajo 0.8.0 documentation" href="index.html"/>
        <link rel="next" title="Tajo JDBC Driver" href="jdbc_driver.html"/>
        <link rel="prev" title="카탈로그 백업 및 복원" href="backup_and_restore/catalog.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html" class="fa fa-home"> Apache Tajo</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Apache Tajo란?</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">시작하기</a><ul>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html#id2">준비 사항</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html#id3">다운로드 및 소스코드 풀기</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html#id5">소스코드 빌드</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html#id6">로컬 클러스터 셋업</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html#id7">첫 질의 실행</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="configuration/preliminary.html">Preliminary</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration/cluster_setup.html">Cluster Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration/tajo_master_configuration.html">Tajo Master Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration/worker_configuration.html">Worker Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration/catalog_configuration.html">Catalog Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration/ha_configuration.html">High Availability for TajoMaster</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration/service_config_defaults.html">Cluster Service Configuration Defaults</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration/tajo-site-xml.html">The tajo-site.xml File</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration/catalog-site-xml.html">The catalog-site.xml File</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tsql.html">Tajo Shell (TSQL)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tsql/meta_command.html">Meta Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="tsql/dfs_command.html">Executing HDFS commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="tsql/variables.html">Session Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="tsql/admin_command.html">Administration Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="tsql/intro.html">Introducing to TSQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="tsql/single_command.html">Executing a single command</a></li>
<li class="toctree-l2"><a class="reference internal" href="tsql/execute_file.html">Executing Queries from Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="tsql/background_command.html">Executing as background process</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="sql_language.html">SQL 언어 (Tajo 질의 언어)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="sql_language/data_model.html">데이터 모델</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql_language/ddl.html">데이터 정의 언어 (DDL, Data Definition Language)</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql_language/insert.html">데이터 삽입: INSERT (OVERWRITE) INTO</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql_language/queries.html">질의하기</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql_language/sql_expression.html">SQL 수식</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql_language/predicates.html">연산자</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="time_zone.html">타임존(Time Zone)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="time_zone.html#server-cluster-time-zone">서버 클러스터 타임존 (Server Cluster Time Zone)</a></li>
<li class="toctree-l2"><a class="reference internal" href="time_zone.html#table-time-zone">테이블 타임존 (Table Time Zone)</a></li>
<li class="toctree-l2"><a class="reference internal" href="time_zone.html#client-time-zone">클라이언트 타임존 (Client Time Zone)</a></li>
<li class="toctree-l2"><a class="reference internal" href="time_zone.html#time-zone-id">Time Zone ID</a></li>
<li class="toctree-l2"><a class="reference internal" href="time_zone.html#id1">타임존 사용 예제</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="functions.html">Functions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="functions/math_func_and_operators.html">수학함수와 연산자들</a></li>
<li class="toctree-l2"><a class="reference internal" href="functions/string_func_and_operators.html">문자열 함수와 연산자들</a></li>
<li class="toctree-l2"><a class="reference internal" href="functions/datetime_func_and_operators.html">날짜 및 시간 함수와 연산자들</a></li>
<li class="toctree-l2"><a class="reference internal" href="functions/network_func_and_operators.html">네트워크 함수와 연산자들</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="table_management.html">테이블 관리</a><ul>
<li class="toctree-l2"><a class="reference internal" href="table_management/table_overview.html">Apache Tajo 테이블 관리 개요</a></li>
<li class="toctree-l2"><a class="reference internal" href="table_management/file_formats.html">파일 포맷</a></li>
<li class="toctree-l2"><a class="reference internal" href="table_management/compression.html">압축</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="table_partitioning.html">테이블 파티셔닝</a><ul>
<li class="toctree-l2"><a class="reference internal" href="partitioning/intro_to_partitioning.html">파티셔닝 소개</a></li>
<li class="toctree-l2"><a class="reference internal" href="partitioning/column_partitioning.html">컬럼 파티셔닝</a></li>
<li class="toctree-l2"><a class="reference internal" href="partitioning/range_partitioning.html">범위 파티셔닝 (Range Partitioning)</a></li>
<li class="toctree-l2"><a class="reference internal" href="partitioning/hash_partitioning.html">해쉬 (Hash) 파티셔닝</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="backup_and_restore.html">백업 및 복원</a><ul>
<li class="toctree-l2"><a class="reference internal" href="backup_and_restore/catalog.html">카탈로그 백업 및 복원</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">HCatalog Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="jdbc_driver.html">Tajo JDBC Driver</a><ul>
<li class="toctree-l2"><a class="reference internal" href="jdbc_driver.html#how-to-get-jdbc-driver">How to get JDBC driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="jdbc_driver.html#setting-the-classpath">Setting the CLASSPATH</a></li>
<li class="toctree-l2"><a class="reference internal" href="jdbc_driver.html#an-example-jdbc-client">An Example JDBC Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="jdbc_driver.html#faq">FAQ</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tajo_client_api.html">Tajo Client API</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a></li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Apache Tajo</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>HCatalog Integration</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/hcatalog_integration.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="hcatalog-integration">
<h1>HCatalog Integration<a class="headerlink" href="#hcatalog-integration" title="Permalink to this headline">¶</a></h1>
<p>Apache Tajo™ catalog supports HCatalogStore driver to integrate with Apache Hive™.
This integration allows Tajo to access all tables used in Apache Hive.
Depending on your purpose, you can execute either SQL queries or HiveQL queries on the
same tables managed in Apache Hive.</p>
<p>In order to use this feature, you need to build Tajo with a specified maven profile
and then add some configs into <tt class="docutils literal"><span class="pre">conf/tajo-env.sh</span></tt> and <tt class="docutils literal"><span class="pre">conf/catalog-site.xml</span></tt>.
This section describes how to setup HCatalog integration.
This instruction would take no more than ten minutes.</p>
<p>First, you need to compile the source code with hcatalog profile.
Currently, Tajo supports hcatalog-0.11.0 and hcatalog-0.12.0 profile.
So, if you want to use Hive 0.11.0, you need to set <tt class="docutils literal"><span class="pre">-Phcatalog-0.11.0</span></tt> as the maven profile</p>
<div class="highlight-python"><div class="highlight"><pre>$ mvn clean package -DskipTests -Pdist -Dtar -Phcatalog-0.11.0
</pre></div>
</div>
<p>Or, if you want to use Hive 0.12.0, you need to set <tt class="docutils literal"><span class="pre">-Phcatalog-0.12.0</span></tt> as the maven profile</p>
<div class="highlight-python"><div class="highlight"><pre>$ mvn clean package -DskipTests -Pdist -Dtar -Phcatalog-0.12.0
</pre></div>
</div>
<p>Then, you need to set your Hive home directory to the environment variable <tt class="docutils literal"><span class="pre">HIVE_HOME</span></tt> in conf/tajo-env.sh as follows:</p>
<div class="highlight-python"><div class="highlight"><pre>export HIVE_HOME=/path/to/your/hive/directory
</pre></div>
</div>
<p>If you need to use jdbc to connect HiveMetaStore, you have to prepare MySQL jdbc driver.
Next, you should set the path of MySQL JDBC driver jar file to the environment variable HIVE_JDBC_DRIVER_DIR in conf/tajo-env.sh as follows:</p>
<div class="highlight-python"><div class="highlight"><pre>export HIVE_JDBC_DRIVER_DIR==/path/to/your/mysql_jdbc_driver/mysql-connector-java-x.x.x-bin.jar
</pre></div>
</div>
<p>Finally, you should specify HCatalogStore as Tajo catalog driver class in <tt class="docutils literal"><span class="pre">conf/catalog-site.xml</span></tt> as follows:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;property&gt;
  &lt;name&gt;tajo.catalog.store.class&lt;/name&gt;
  &lt;value&gt;org.apache.tajo.catalog.store.HCatalogStore&lt;/value&gt;
&lt;/property&gt;
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Hive stores a list of partitions for each table in its metastore. If new partitions are
directly added to HDFS, HiveMetastore will not able aware of these partitions unless the user
<tt class="docutils literal"><span class="pre">ALTER</span> <span class="pre">TABLE</span> <span class="pre">table_name</span> <span class="pre">ADD</span> <span class="pre">PARTITION</span></tt> commands on each of the newly added partitions or
<tt class="docutils literal"><span class="pre">MSCK</span> <span class="pre">REPAIR</span> <span class="pre">TABLE</span>&nbsp; <span class="pre">table_name</span></tt> command.</p>
<p>But current tajo doesn&#8217;t provide <tt class="docutils literal"><span class="pre">ADD</span> <span class="pre">PARTITION</span></tt> command and hive doesn&#8217;t provide an api for
responding to <tt class="docutils literal"><span class="pre">MSK</span> <span class="pre">REPAIR</span> <span class="pre">TABLE</span></tt> command. Thus, if you insert data to hive partitioned
table and you want to scan the updated partitions through Tajo, you must run following command on hive</p>
<div class="last highlight-python"><div class="highlight"><pre>$ MSCK REPAIR TABLE [table_name];
</pre></div>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="jdbc_driver.html" class="btn btn-neutral float-right" title="Tajo JDBC Driver"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="backup_and_restore/catalog.html" class="btn btn-neutral" title="카탈로그 백업 및 복원"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, Apache Tajo Team.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.8.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>