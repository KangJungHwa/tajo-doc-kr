

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Worker Configuration &mdash; Apache Tajo 0.8.0 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="Apache Tajo 0.8.0 documentation" href="../index.html"/>
        <link rel="up" title="Configuration" href="../configuration.html"/>
        <link rel="next" title="Catalog Configuration" href="catalog_configuration.html"/>
        <link rel="prev" title="Tajo Master Configuration" href="tajo_master_configuration.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../index.html" class="fa fa-home"> Apache Tajo</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">아파치 타조란?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">시작하기</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting_started.html#id2">준비 사항</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started.html#id3">다운로드 및 소스코드 풀기</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started.html#id5">소스코드 빌드</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started.html#id6">로컬 클러스터 셋업</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started.html#id7">첫 질의 실행</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../configuration.html">Configuration</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="preliminary.html">Preliminary</a></li>
<li class="toctree-l2"><a class="reference internal" href="cluster_setup.html">Cluster Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="tajo_master_configuration.html">Tajo Master Configuration</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Worker Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="catalog_configuration.html">Catalog Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="ha_configuration.html">High Availability for TajoMaster</a></li>
<li class="toctree-l2"><a class="reference internal" href="service_config_defaults.html">Cluster Service Configuration Defaults</a></li>
<li class="toctree-l2"><a class="reference internal" href="tajo-site-xml.html">The tajo-site.xml File</a></li>
<li class="toctree-l2"><a class="reference internal" href="catalog-site-xml.html">The catalog-site.xml File</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tsql.html">Tajo Shell (TSQL)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tsql/meta_command.html">Meta Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tsql/dfs_command.html">Executing HDFS commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tsql/variables.html">Session Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tsql/admin_command.html">Administration Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tsql/intro.html">Introducing to TSQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tsql/single_command.html">Executing a single command</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tsql/execute_file.html">Executing Queries from Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tsql/background_command.html">Executing as background process</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../sql_language.html">SQL Language</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../sql_language/data_model.html">Data Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sql_language/ddl.html">Data Definition Language</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sql_language/insert.html">INSERT (OVERWRITE) INTO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sql_language/queries.html">Queries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sql_language/sql_expression.html">SQL Expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sql_language/predicates.html">Predicates</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../time_zone.html">타임존(Time Zone)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../time_zone.html#server-cluster-time-zone">서버 클러스터 타임존 (Server Cluster Time Zone)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../time_zone.html#table-time-zone">테이블 타임존 (Table Time Zone)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../time_zone.html#client-time-zone">클라이언트 타임존 (Client Time Zone)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../time_zone.html#time-zone-id">Time Zone ID</a></li>
<li class="toctree-l2"><a class="reference internal" href="../time_zone.html#id1">타임존 사용 예제</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../functions.html">Functions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../functions/math_func_and_operators.html">Math Functions and Operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/string_func_and_operators.html">String Functions and Operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/datetime_func_and_operators.html">DateTime Functions and Operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/network_func_and_operators.html">Network Functions and Operators</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../table_management.html">Table Management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../table_management/table_overview.html">Overview of Tajo Tables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../table_management/file_formats.html">File Formats</a></li>
<li class="toctree-l2"><a class="reference internal" href="../table_management/compression.html">Compression</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../table_partitioning.html">Table Partitioning</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../partitioning/intro_to_partitioning.html">Introduction to Partitioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../partitioning/column_partitioning.html">Column Partitioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../partitioning/range_partitioning.html">Range Partitioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../partitioning/hash_partitioning.html">Hash Partitioning</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../backup_and_restore.html">Backup and Restore</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../backup_and_restore/catalog.html">Backup and Restore Catalog</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../hcatalog_integration.html">HCatalog Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jdbc_driver.html">Tajo JDBC Driver</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../jdbc_driver.html#how-to-get-jdbc-driver">How to get JDBC driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jdbc_driver.html#setting-the-classpath">Setting the CLASSPATH</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jdbc_driver.html#an-example-jdbc-client">An Example JDBC Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jdbc_driver.html#faq">FAQ</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tajo_client_api.html">Tajo Client API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Apache Tajo</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../configuration.html">Configuration</a> &raquo;</li>
      
    <li>Worker Configuration</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../_sources/configuration/worker_configuration.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="worker-configuration">
<h1>Worker Configuration<a class="headerlink" href="#worker-configuration" title="Permalink to this headline">¶</a></h1>
<div class="section" id="worker-heap-memory-size">
<h2>Worker Heap Memory Size<a class="headerlink" href="#worker-heap-memory-size" title="Permalink to this headline">¶</a></h2>
<p>The environment variable <tt class="docutils literal"><span class="pre">TAJO_WORKER_HEAPSIZE</span></tt> in <tt class="docutils literal"><span class="pre">conf/tajo-env.sh</span></tt> allow Tajo Worker to use the specified heap memory size.</p>
<p>If you want to adjust heap memory size, set <tt class="docutils literal"><span class="pre">TAJO_WORKER_HEAPSIZE</span></tt> variable in <tt class="docutils literal"><span class="pre">conf/tajo-env.sh</span></tt> with a proper size as follows:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">TAJO_WORKER_HEAPSIZE</span><span class="o">=</span>8000
</pre></div>
</div>
<p>The default size is 1000 (1GB).</p>
</div>
<div class="section" id="temporary-data-directory">
<h2>Temporary Data Directory<a class="headerlink" href="#temporary-data-directory" title="Permalink to this headline">¶</a></h2>
<p>TajoWorker stores temporary data on local file system due to out-of-core algorithms. It is possible to specify one or more temporary data directories where temporary data will be stored.</p>
<p><tt class="docutils literal"><span class="pre">tajo-site.xml</span></tt></p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;property&gt;</span>
  <span class="nt">&lt;name&gt;</span>tajo.worker.tmpdir.locations<span class="nt">&lt;/name&gt;</span>
  <span class="nt">&lt;value&gt;</span>/disk1/tmpdir,/disk2/tmpdir,/disk3/tmpdir<span class="nt">&lt;/value&gt;</span>
<span class="nt">&lt;/property&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="maximum-number-of-parallel-running-tasks-for-each-worker">
<h2>Maximum number of parallel running tasks for each worker<a class="headerlink" href="#maximum-number-of-parallel-running-tasks-for-each-worker" title="Permalink to this headline">¶</a></h2>
<p>In Tajo, the capacity of running tasks in parallel are determined by available resources and workload of running queries. In order to specify it, please see [Worker Resources] (#ResourceConfiguration) section.</p>
</div>
<div class="section" id="worker-resources">
<h2>Worker Resources<a class="headerlink" href="#worker-resources" title="Permalink to this headline">¶</a></h2>
<p>Each worker can execute multiple tasks simultaneously.
In Tajo, users can specify the total size of memory and the number of disks for each worker. Available resources affect how many tasks are executed simultaneously.</p>
<p>In order to specify the resource capacity of each worker, you should add the following configs to <tt class="docutils literal"><span class="pre">tajo-site.xml</span></tt> :</p>
<table border="1" class="docutils">
<colgroup>
<col width="32%" />
<col width="25%" />
<col width="18%" />
<col width="24%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">property name</th>
<th class="head">description</th>
<th class="head">value type</th>
<th class="head">default value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>tajo.worker.resource.cpu-cores</td>
<td>the number of cpu cores</td>
<td>integer</td>
<td>1</td>
</tr>
<tr class="row-odd"><td>tajo.worker.resource.memory-mb</td>
<td>memory size (MB)</td>
<td>integer</td>
<td>1024</td>
</tr>
<tr class="row-even"><td>tajo.worker.resource.disks</td>
<td>the number of disks</td>
<td>integer</td>
<td>1</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Currently, QueryMaster requests 512MB memory and 0.5 disk per task for the backward compatibility.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If <tt class="docutils literal"><span class="pre">tajo.worker.resource.dfs-dir-aware</span></tt> is set to <tt class="docutils literal"><span class="pre">true</span></tt> in <tt class="docutils literal"><span class="pre">tajo-site.xml</span></tt>, the worker will aware of and use the number of HDFS datanode&#8217;s data dirs in the node.
In other words, <tt class="docutils literal"><span class="pre">tajo.worker.resource.disks</span></tt> is ignored.</p>
</div>
<div class="section" id="example">
<h3>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h3>
<p>Assume that you want to give 5120 MB memory, 4 disks, and 24 cores on each worker. The example configuration is as follows:</p>
<p><tt class="docutils literal"><span class="pre">tajo-site.xml</span></tt></p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;property&gt;</span>
  <span class="nt">&lt;name&gt;</span>tajo.worker.resource.tajo.worker.resource.cpu-cores<span class="nt">&lt;/name&gt;</span>
  <span class="nt">&lt;value&gt;</span>24<span class="nt">&lt;/value&gt;</span>
<span class="nt">&lt;/property&gt;</span>

 <span class="nt">&lt;property&gt;</span>
  <span class="nt">&lt;name&gt;</span>tajo.worker.resource.memory-mb<span class="nt">&lt;/name&gt;</span>
  <span class="nt">&lt;value&gt;</span>5120<span class="nt">&lt;/value&gt;</span>
<span class="nt">&lt;/property&gt;</span>

<span class="nt">&lt;property&gt;</span>
  <span class="nt">&lt;name&gt;</span>tajo.worker.resource.tajo.worker.resource.disks<span class="nt">&lt;/name&gt;</span>
  <span class="nt">&lt;value&gt;</span>4.0<span class="nt">&lt;/value&gt;</span>
<span class="nt">&lt;/property&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="dedicated-mode">
<h3>Dedicated Mode<a class="headerlink" href="#dedicated-mode" title="Permalink to this headline">¶</a></h3>
<p>Tajo provides a dedicated mode that allows each worker in a Tajo cluster to use whole available system resources including cpu-cores, memory, and disks. For this mode, a user should add the following config to <tt class="docutils literal"><span class="pre">tajo-site.xml</span></tt> :</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;property&gt;</span>
  <span class="nt">&lt;name&gt;</span>tajo.worker.resource.dedicated<span class="nt">&lt;/name&gt;</span>
  <span class="nt">&lt;value&gt;</span>true<span class="nt">&lt;/value&gt;</span>
<span class="nt">&lt;/property&gt;</span>
</pre></div>
</div>
<p>In addition, it can limit the memory capacity used for Tajo worker as follows:</p>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="35%" />
<col width="14%" />
<col width="17%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">property name</th>
<th class="head">description</th>
<th class="head">value type</th>
<th class="head">default value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>tajo.worker.resource.dedicated-memory-ratio</td>
<td>how much memory to be used in whole memory</td>
<td>float</td>
<td>0.8</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="catalog_configuration.html" class="btn btn-neutral float-right" title="Catalog Configuration"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="tajo_master_configuration.html" class="btn btn-neutral" title="Tajo Master Configuration"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, Apache Tajo Team.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.8.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>