

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Tajo JDBC Driver &mdash; Apache Tajo 0.8.0 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="Apache Tajo 0.8.0 documentation" href="index.html"/>
        <link rel="next" title="Tajo Client API" href="tajo_client_api.html"/>
        <link rel="prev" title="HCatalog Integration" href="hcatalog_integration.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html" class="fa fa-home"> Apache Tajo</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">아파치 타조란?</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="getting_started/prerequisites.html">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting_started/downloading_source.html">Dowload and unpack the source code</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting_started/building.html">Build source code</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting_started/local_setup.html">Setting up a local Tajo cluster</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting_started/first_query.html">First query execution</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="configuration/preliminary.html">Preliminary</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration/cluster_setup.html">Cluster Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration/tajo_master_configuration.html">Tajo Master Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration/worker_configuration.html">Worker Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration/catalog_configuration.html">Catalog Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration/ha_configuration.html">High Availability for TajoMaster</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration/service_config_defaults.html">Cluster Service Configuration Defaults</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration/tajo-site-xml.html">The tajo-site.xml File</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration/catalog-site-xml.html">The catalog-site.xml File</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tsql.html">Tajo Shell (TSQL)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tsql/meta_command.html">Meta Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="tsql/dfs_command.html">Executing HDFS commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="tsql/variables.html">Session Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="tsql/admin_command.html">Administration Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="tsql/intro.html">Introducing to TSQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="tsql/single_command.html">Executing a single command</a></li>
<li class="toctree-l2"><a class="reference internal" href="tsql/execute_file.html">Executing Queries from Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="tsql/background_command.html">Executing as background process</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="sql_language.html">SQL Language</a><ul>
<li class="toctree-l2"><a class="reference internal" href="sql_language/data_model.html">Data Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql_language/ddl.html">Data Definition Language</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql_language/insert.html">INSERT (OVERWRITE) INTO</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql_language/queries.html">Queries</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql_language/sql_expression.html">SQL Expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql_language/predicates.html">Predicates</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="time_zone.html">타임존(Time Zone)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="time_zone.html#server-cluster-time-zone">서버 클러스터 타임존 (Server Cluster Time Zone)</a></li>
<li class="toctree-l2"><a class="reference internal" href="time_zone.html#table-time-zone">테이블 타임존 (Table Time Zone)</a></li>
<li class="toctree-l2"><a class="reference internal" href="time_zone.html#client-time-zone">Client Time Zone</a></li>
<li class="toctree-l2"><a class="reference internal" href="time_zone.html#time-zone-id">Time Zone ID</a></li>
<li class="toctree-l2"><a class="reference internal" href="time_zone.html#examples-of-time-zone">Examples of Time Zone</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="functions.html">Functions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="functions/math_func_and_operators.html">Math Functions and Operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="functions/string_func_and_operators.html">String Functions and Operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="functions/datetime_func_and_operators.html">DateTime Functions and Operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="functions/network_func_and_operators.html">Network Functions and Operators</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="table_management.html">Table Management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="table_management/table_overview.html">Overview of Tajo Tables</a></li>
<li class="toctree-l2"><a class="reference internal" href="table_management/file_formats.html">File Formats</a></li>
<li class="toctree-l2"><a class="reference internal" href="table_management/compression.html">Compression</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="table_partitioning.html">Table Partitioning</a><ul>
<li class="toctree-l2"><a class="reference internal" href="partitioning/intro_to_partitioning.html">Introduction to Partitioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="partitioning/column_partitioning.html">Column Partitioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="partitioning/range_partitioning.html">Range Partitioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="partitioning/hash_partitioning.html">Hash Partitioning</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="backup_and_restore.html">Backup and Restore</a><ul>
<li class="toctree-l2"><a class="reference internal" href="backup_and_restore/catalog.html">Backup and Restore Catalog</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="hcatalog_integration.html">HCatalog Integration</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Tajo JDBC Driver</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#how-to-get-jdbc-driver">How to get JDBC driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="#setting-the-classpath">Setting the CLASSPATH</a></li>
<li class="toctree-l2"><a class="reference internal" href="#an-example-jdbc-client">An Example JDBC Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="#faq">FAQ</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tajo_client_api.html">Tajo Client API</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a></li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Apache Tajo</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Tajo JDBC Driver</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/jdbc_driver.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="tajo-jdbc-driver">
<h1>Tajo JDBC Driver<a class="headerlink" href="#tajo-jdbc-driver" title="Permalink to this headline">¶</a></h1>
<p>Apache Tajo™ provides JDBC driver
which enables Java applciations to easily access Apache Tajo in a RDBMS-like manner.
In this section, we explain how to get JDBC driver and an example code.</p>
<div class="section" id="how-to-get-jdbc-driver">
<h2>How to get JDBC driver<a class="headerlink" href="#how-to-get-jdbc-driver" title="Permalink to this headline">¶</a></h2>
<div class="section" id="from-binary-distribution">
<h3>From Binary Distribution<a class="headerlink" href="#from-binary-distribution" title="Permalink to this headline">¶</a></h3>
<p>Tajo binary distribution provides JDBC jar file and its dependent JAR files.
Those files are located in <tt class="docutils literal"><span class="pre">${TAJO_HOME}/share/jdbc-dist/</span></tt>.</p>
</div>
<div class="section" id="from-building-source-code">
<h3>From Building Source Code<a class="headerlink" href="#from-building-source-code" title="Permalink to this headline">¶</a></h3>
<p>You can build Tajo from the source code and then get JAR files as follows:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>tar xzvf tajo-x.y.z-src.tar.gz
<span class="nv">$ </span>mvn clean package -DskipTests -Pdist -Dtar
<span class="nv">$ </span>ls -l tajo-dist/target/tajo-x.y.z/share/jdbc-dist
</pre></div>
</div>
</div>
</div>
<div class="section" id="setting-the-classpath">
<h2>Setting the CLASSPATH<a class="headerlink" href="#setting-the-classpath" title="Permalink to this headline">¶</a></h2>
<p>In order to use the JDBC driver, you should set the jar files included in
<tt class="docutils literal"><span class="pre">tajo-dist/target/tajo-x.y.z/share/jdbc-dist</span></tt> to your <tt class="docutils literal"><span class="pre">CLASSPATH</span></tt>.
In addition, you should add hadoop clsspath into your <tt class="docutils literal"><span class="pre">CLASSPATH</span></tt>.
So, <tt class="docutils literal"><span class="pre">CLASSPATH</span></tt> will be set as follows:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">CLASSPATH</span><span class="o">=</span>path/to/tajo-jdbc/*:path/to/tajo-site.xml:path/to/core-site.xml:path/to/hdfs-site.xml
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You must add the locations which include Tajo config files (i.e., <tt class="docutils literal"><span class="pre">tajo-site.xml</span></tt>) and
Hadoop config files (i.e., <tt class="docutils literal"><span class="pre">core-site.xml</span></tt> and <tt class="docutils literal"><span class="pre">hdfs-site.xml</span></tt>) to your <tt class="docutils literal"><span class="pre">CLASSPATH</span></tt>.</p>
</div>
</div>
<div class="section" id="an-example-jdbc-client">
<h2>An Example JDBC Client<a class="headerlink" href="#an-example-jdbc-client" title="Permalink to this headline">¶</a></h2>
<p>The JDBC driver class name is <tt class="docutils literal"><span class="pre">org.apache.tajo.jdbc.TajoDriver</span></tt>.
You can get the driver <tt class="docutils literal"><span class="pre">Class.forName(&quot;org.apache.tajo.jdbc.TajoDriver&quot;)</span></tt>.
The connection url should be <tt class="docutils literal"><span class="pre">jdbc:tajo://&lt;TajoMaster</span> <span class="pre">hostname&gt;:&lt;TajoMaster</span> <span class="pre">client</span> <span class="pre">rpc</span> <span class="pre">port&gt;/&lt;database</span> <span class="pre">name&gt;</span></tt>.
The default TajoMaster client rpc port is <tt class="docutils literal"><span class="pre">26002</span></tt>.
If you want to change the listening port, please refer <tt class="xref doc docutils literal"><span class="pre">/configuration/configuration_defaults</span></tt>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Currently, Tajo does not support the concept of database and namespace.
All tables are contained in <tt class="docutils literal"><span class="pre">default</span></tt> database. So, you don&#8217;t need to specify any database name.</p>
</div>
<p>The following shows an example of JDBC Client.</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">java.sql.Connection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.ResultSet</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.Statement</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.DriverManager</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TajoJDBCClient</span> <span class="o">{</span>

  <span class="o">....</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>

    <span class="k">try</span> <span class="o">{</span>
      <span class="n">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="s">&quot;org.apache.tajo.jdbc.TajoDriver&quot;</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">ClassNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="c1">// fill your handling code</span>
    <span class="o">}</span>

    <span class="n">Connection</span> <span class="n">conn</span> <span class="o">=</span> <span class="n">DriverManager</span><span class="o">.</span><span class="na">getConnection</span><span class="o">(</span><span class="s">&quot;jdbc:tajo://127.0.0.1:26002/default&quot;</span><span class="o">);</span>

    <span class="n">Statement</span> <span class="n">stmt</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="n">ResultSet</span> <span class="n">rs</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="n">stmt</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">createStatement</span><span class="o">();</span>
      <span class="n">rs</span> <span class="o">=</span> <span class="n">stmt</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">(</span><span class="s">&quot;select * from table1&quot;</span><span class="o">);</span>
      <span class="k">while</span> <span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">())</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="o">+</span> <span class="s">&quot;,&quot;</span> <span class="o">+</span> <span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">3</span><span class="o">));</span>
      <span class="o">}</span>
    <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">rs</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="n">rs</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">stmt</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="n">stmt</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">conn</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="n">conn</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="faq">
<h2>FAQ<a class="headerlink" href="#faq" title="Permalink to this headline">¶</a></h2>
<div class="section" id="java-nio-channels-unresolvedaddressexception">
<h3>java.nio.channels.UnresolvedAddressException<a class="headerlink" href="#java-nio-channels-unresolvedaddressexception" title="Permalink to this headline">¶</a></h3>
<p>When retriving the final result, Tajo JDBC Driver tries to access HDFS data nodes.
So, the network access between JDBC client and HDFS data nodes must be available.
In many cases, a HDFS cluster is built in a private network which use private hostnames.
So, the host names must be shared with the JDBC client side.</p>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="tajo_client_api.html" class="btn btn-neutral float-right" title="Tajo Client API"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="hcatalog_integration.html" class="btn btn-neutral" title="HCatalog Integration"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, Apache Tajo Team.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.8.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>